---
title: "Backend & Beyond By Sungwon ğŸ˜"
date: "2025-10-17"
description: "ì•ˆì •ì ì¸ ì‹œìŠ¤í…œì„ ë§Œë“¤ê³ , ìƒˆë¡œìš´ ê¸°ìˆ ì„ ë°°ì›ë‹ˆë‹¤."
cover: "/images/cover-engineer.jpg"
tags:
  [
    "Spring Boot",
    "Kafka",
    "Microservice",
    "Performance",
    "DevOps",
    "Node.js",
    "Next.js",
  ]
---

## <img src="/img/asdasdasd.jpg" alt="" width="100" />

# ë°•ì„±ì› | Backend & Beyond By Sungwon

ë¹„íš¨ìœ¨ì„ ìë™í™”í•˜ê³ , **ê³ ê°ì´ ì§„ì§œ ê°€ì¹˜ ìˆëŠ” ì¼ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ ë•ëŠ” ì—”ì§€ë‹ˆì–´**,  
ë°•ì„±ì›ì…ë‹ˆë‹¤.  
RPAì™€ ì›¹ ê°œë°œ(Spring Boot + Node.js)ì„ í•¨ê»˜ ìˆ˜í–‰í•˜ë©°,  
í”„ë¡œì„¸ìŠ¤ ìë™í™”ë¶€í„° ì›¹í¬í„¸ êµ¬ì¶•ê¹Œì§€ ì „ ì£¼ê¸° ê°œë°œì„ ë‹´ë‹¹í•´ì™”ìŠµë‹ˆë‹¤.

---

## ğŸ§© About Me

- **í˜„ì¬** â³: 2021.07 ~ ì¬ì§ ì¤‘
- **ì—­í• ** ğŸ’¼: RPA ê°œë°œ ë° ìì‚¬ ì†”ë£¨ì…˜ ì›¹ ê°œë°œ ìœ ì§€ë³´ìˆ˜

- **í•™ë ¥** ğŸ“: í•œêµ­ë°©ì†¡í†µì‹ ëŒ€í•™êµ ì»´í“¨í„°ê³¼í•™ê³¼ ì¡¸ì—… (2024.02)
- **ì´ë©”ì¼** âœ‰ï¸: thesungwon@gmail.com

- **[GitHub í”„ë¡œí•„ ë³´ê¸°ëŸ¬ê°€ê¸° ğŸ™](https://github.com/thesungwon) ğŸ”—**

**Skills**

| ì˜ì—­              | ê¸°ìˆ                                                              |
| ----------------- | ---------------------------------------------------------------- |
| Back-End âš™ï¸       | Java, Spring Boot, JPA, MyBatis, MariaDB, SQL                    |
| Front-End ğŸ’»      | JavaScript, TypeScript, React.js, Next.js, Node.js, jQuery, AJAX |
| Automation ğŸ¤–     | RPA, VBA, C#, Selenium                                           |
| DevOps / Tools ğŸ› ï¸ | Linux, Docker, Podman, GitHub, GitLab, Jira, Slack, Teams        |

**As a Developer**
| í•­ëª© | ë‚´ìš© |
| ------ | ------------------------------------------------------------------- |
| í¬ì§€ì…˜ | **RPA & Full-Stack Developer** |
| ì„±í–¥ | ìë™í™” ì¤‘ì‹¬, ë¬¸ì œ í•´ê²° ì§€í–¥, ì‹¤ìš©ì  ì ‘ê·¼ |
| ëª©í‘œ | RPAì™€ ì›¹ ê¸°ìˆ ì„ ìœµí•©í•˜ì—¬ íš¨ìœ¨ì ì¸ í”„ë¡œì„¸ìŠ¤ ìë™í™” ì‹œìŠ¤í…œ êµ¬ì¶• |
| ê°€ì¹˜ê´€ | í˜„ì—… ì¹œí™”ì  í˜‘ì—…, ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„± ì¤‘ì‹¬ì˜ ì½”ë“œ, ê¾¸ì¤€í•œ ìê¸° ì„±ì¥ |

> â€œìë™í™”ëŠ” ë‹¨ìˆœí•œ ë°˜ë³µì˜ ì œê±°ê°€ ì•„ë‹ˆë¼, ì‚¬ëŒì´ ë” ì°½ì˜ì ì¸ ì¼ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ ë§Œë“œëŠ” ê¸°ìˆ ì´ë¼ê³  ë¯¿ìŠµë‹ˆë‹¤.â€

---

## ğŸš€ A ì¦ê¶Œì‚¬ RPA êµ¬ì¶• (1, 2ì°¨)

**ê¸°ê°„:** 2021(1ì°¨), 2022(2ì°¨)  
**ì—­í• :** RPA ê°œë°œ  
**ì„±ê³¼:** ìˆ˜ì‘ì—… ì—…ë¬´ ìë™í™”

**ê°œìš”**

ì—¬ì˜ë„ A ì¦ê¶Œì‚¬ì˜ ë‚´ë¶€ ê²°ì¬ ë° íšŒê³„, ì˜ˆíƒì› ë°ì´í„° ë“±ë¡ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™í™”í•œ **RPA êµ¬ì¶• í”„ë¡œì íŠ¸**ì…ë‹ˆë‹¤.  
ë°˜ë³µì ì´ê³  ì˜¤ë¥˜ ë°œìƒì´ ì¦ë˜ ìˆ˜ì‘ì—… ì—…ë¬´ë¥¼ RPA ë¡œì§ìœ¼ë¡œ ìë™í™”í•˜ì—¬  
ì—…ë¬´ ì •í™•ë„ì™€ íš¨ìœ¨ì„±ì„ ë†’ì˜€ìœ¼ë©°, **1Â·2ì°¨ ì—°ë„ë³„ë¡œ ì´ 11ê±´ì˜ ìë™í™” í”„ë¡œì„¸ìŠ¤**ë¥¼ ê°œë°œí–ˆìŠµë‹ˆë‹¤.

**ì£¼ìš” ê¸°ì—¬**

- **ê²°ì¬ì„œë¥˜ ì¼ê´„ ì „ì†¡ ìë™í™”**

  - ì¼ì¼ ê²°ì¬ì„œë¥˜ë¥¼ ì¡°íšŒ í›„ ê° ë¶€ì„œë³„ í™”ë©´ì— ë§ê²Œ ìë™ ì—…ë¡œë“œ
  - ìˆ˜ë™ ì „ì†¡ ëŒ€ë¹„ ì²˜ë¦¬ ì†ë„ **í–¥ìƒ**

- **ë²•ì¸ì¹´ë“œ ì‚¬ìš©ë‚´ì—­ ê²€ì¦ ìë™í™”**

  - ë¶€ì„œë³„ ê·¼íƒœ ë°ì´í„°ì™€ ë²•ì¸ì¹´ë“œ ë‚´ì—­ì„ ëŒ€ì¡°í•˜ì—¬ ìë™ ê²€ì¦

- **ì˜ˆíƒì› ìë£Œ ë“±ë¡ ìë™í™”**

  - ì˜ì—…ì¼ ê¸°ì¤€ìœ¼ë¡œ ê³ ê°ì‚¬ í”„ë¡œê·¸ë¨ì„ í†µí•´ ë°ì´í„° ìˆ˜ì§‘ ë° ëŒ€ì‚¬ ì²˜ë¦¬
  - ì˜ˆíƒì› íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë° ë¶€ì„œë³„ íŒŒì¼ ìë™ ì „ì†¡ ë¡œì§ êµ¬í˜„

- **ë³´ìˆ˜ì´ì•¡ ë“±ë¡ í”„ë¡œì„¸ìŠ¤ ê°œì„ **
  - ë¬¸ì„œ íŒŒì¼ ë‹¤ìš´ë¡œë“œ í›„ OCR ìˆ˜í–‰ â†’ ê²°ê³¼ ë°ì´í„° ìë™ ì¶”ì¶œ ë° ë“±ë¡

---

## ğŸš€ B ë³´í—˜ì‚¬ RPA ìë™í™” ì‹œìŠ¤í…œ

**ê¸°ê°„:** 2023 ~ 2024  
**ì—­í• :** RPA ê°œë°œ  
**ì„±ê³¼:** ë°˜ë³µ ì—…ë¬´ ìë™í™” / ì¼ì¼ ì²˜ë¦¬ëŸ‰ í–¥ìƒ / ì¸ë ¥ ë¦¬ì†ŒìŠ¤ 70% ì ˆê°

**ê°œìš”**

ê´‘í™”ë¬¸ B ë³´í—˜ì‚¬ì˜ ë³´í—˜ ê´€ë ¨ ì—…ë¬´ ì „ë°˜ì„ ìë™í™”í•œ **RPA ì‹œìŠ¤í…œ êµ¬ì¶• í”„ë¡œì íŠ¸**ì…ë‹ˆë‹¤.  
ìˆ˜ë§ì€ ë¶€ì„œë³„ ë³´í—˜ ì •ë³´ ì…ë ¥, íŒŒì¼ ì—…ë¡œë“œ, í†µê³„ ë“±ë¡ ì—…ë¬´ë¥¼ ìë™í™”í•˜ì—¬  
ìˆ˜ì‘ì—… ë¦¬ì†ŒìŠ¤ë¥¼ ì ˆê°í•˜ê³  ì •í™•ë„ ë° ì†ë„ë¥¼ ëŒ€í­ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤.  
ì´ **30ê±´ ì´ìƒì˜ ìë™í™” ì‹œë‚˜ë¦¬ì˜¤**ë¥¼ ê°œë°œ ë° ìš´ì˜í–ˆìŠµë‹ˆë‹¤.

**ì£¼ìš” ê¸°ì—¬**

- **ë¶€ì„œë³„ ë³´í—˜ ì •ë³´ ì…ë ¥ ìë™í™”**

  - ë¶€ì„œë³„ ì—‘ì…€ ë³´í—˜ ì •ë³´ë¥¼ ì¶”ì¶œí•˜ì—¬ ê³ ê°ì‚¬ ë‚´ë¶€ í”„ë¡œê·¸ë¨ì— ìë™ ë“±ë¡
  - ì…ë ¥ ì •í™•ë„ í–¥ìƒ ë° ì²˜ë¦¬ ì†ë„ **ê°œì„ **

- **ë³´í—˜ ê´€ë ¨ íŒŒì¼ ì—…ë¡œë“œ ìë™í™”**

  - ê° ë¶€ì„œì˜ ë³´í—˜ ê´€ë ¨ ë¬¸ì„œë“¤ì„ ìë™ ìˆ˜ì§‘ ë° ì—…ë¡œë“œ

- **ë³´í—˜ í†µê³„ ìë™ ë“±ë¡**

  - ì›” 1íšŒ ë¶€ì„œë³„ ë³´í—˜ í†µê³„ ê²°ê³¼ ìë™ ê³„ì‚° ë° í”„ë¡œê·¸ë¨ ë“±ë¡
  - ë°°ì¹˜ ìŠ¤ì¼€ì¤„ë§ìœ¼ë¡œ ì•¼ê°„ ìë™ ì‹¤í–‰ ë° ë¦¬í¬íŠ¸ ìƒì„±

- **ìš´ì˜ ë° í˜‘ì—… íš¨ìœ¨ ê°œì„ **
  - OneDrive Office, Teamsë¥¼ í†µí•œ RPA ìƒíƒœ ì‹¤ì‹œê°„ ê³µìœ 
  - Seleniumì„ í™œìš©í•œ ì›¹ ìë™í™” í…ŒìŠ¤íŠ¸ ìˆ˜í–‰

---

## ğŸš€ C ì€í–‰ ì›¹í¬í„¸ & RPA í†µí•© ì‹œìŠ¤í…œ

**ê¸°ê°„:** 2025 ìƒë°˜ê¸°  
**ì—­í• :** RPA ë° ì›¹í¬í„¸ ë°±ì—”ë“œ ê°œë°œ  
**ì„±ê³¼:** ë°˜ë³µ ì—…ë¬´ ìë™í™” / ì²˜ë¦¬ ì†ë„ í–¥ìƒ / ì‚¬ìš©ì ë§Œì¡±ë„ í–¥ìƒ

**ê°œìš”**

ì„ì§€ë¡œ C ì€í–‰ì˜ RPAì™€ ì›¹í¬í„¸ì„ í†µí•©í•œ **ìë™í™” ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶• í”„ë¡œì íŠ¸**ì…ë‹ˆë‹¤.  
ê¸°ì¡´ ìˆ˜ì‘ì—… ë°ì´í„° ì…ë ¥ ë° ê²°ê³¼ ê²€ì¦ ê³¼ì •ì„ ìë™í™”í•˜ê³ ,  
ì›¹í¬í„¸ì„ í†µí•´ OCR ë° RPA ê²°ê³¼ë¥¼ ì‹¤ì‹œê°„ ì¡°íšŒÂ·ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ì œê³µí–ˆìŠµë‹ˆë‹¤.

**ì£¼ìš” ê¸°ì—¬**

- **RPA ìë™í™” ë¡œì§ ì„¤ê³„**

  - ì—¬ì‹ ì‚¬í›„ ì •ë³´ ì…ë ¥ ìë™í™”: OCR ê²°ê³¼ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³ ê°ì‚¬ í”„ë¡œê·¸ë¨ ìë™ ì…ë ¥
  - OCR ì¶”ì¶œ ê²°ê³¼ ì •ì œ ë° ê²€ì¦ ë¡œì§ êµ¬í˜„

- **ì›¹í¬í„¸ ê°œë°œ**

  - OCR ë° RPA ê²°ê³¼ ì¡°íšŒ ê¸°ëŠ¥ êµ¬í˜„
  - Spring Boot ê¸°ë°˜ REST API ì„œë²„ ë° ë°°ì¹˜ ìŠ¤ì¼€ì¤„ë§ êµ¬ì¶•
  - ê³ ê°ì‚¬ í”„ë¡œê·¸ë¨ê³¼ì˜ ë°ì´í„° ì—°ë™ ìë™í™”

- **ë°ì´í„°ë² ì´ìŠ¤ ë° ë°±ì—”ë“œ ìµœì í™”**

  - JPA + SQL ë³‘í–‰ ì ìš©ìœ¼ë¡œ ì¿¼ë¦¬ ì„±ëŠ¥ ê°œì„ 

- **ìš´ì˜ íš¨ìœ¨ì„± ê°•í™”**
  - Docker ê¸°ë°˜ ë°°í¬ í™˜ê²½ êµ¬ì¶• ë° í‘œì¤€í™”
  - Jira ê¸°ë°˜ íƒœìŠ¤í¬ ê´€ë¦¬ ë° í˜‘ì—… í”„ë¡œì„¸ìŠ¤ ê°œì„ 

---

## ğŸ“˜ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ 1: Shortify â€” ì‹¤ì‹œê°„ URL ë‹¨ì¶• & ë¡œê·¸ ë¶„ì„ ë°±ì—”ë“œ ì‹œìŠ¤í…œ

**_[GitHub ë³´ê¸°ëŸ¬ê°€ê¸°](https://github.com/thesungwon/shortify) ğŸ”—_**

**ğŸ§© í”„ë¡œì íŠ¸ ê°œìš”**

**í”„ë¡œì íŠ¸ëª…:** Shortify  
**ëª©í‘œ:** ëŒ€ê·œëª¨ ìš”ì²­ì„ ì•ˆì •ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³ , ì‹¤ì‹œê°„ ë¡œê·¸ ë¶„ì„ ë° ë¹„ë™ê¸° ì•Œë¦¼ ì‹œìŠ¤í…œì„ êµ¬í˜„í•œ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ êµ¬ì¶•.

**ğŸš€ í•µì‹¬ ê¸°ëŠ¥**

| êµ¬ë¶„          | ê¸°ëŠ¥ ì„¤ëª…                                 |
| ------------- | ----------------------------------------- |
| ğŸ”— URL ë‹¨ì¶•   | Base62 ì¸ì½”ë”© ê¸°ë°˜ í‚¤ ìƒì„± ë° Redis ìºì‹±  |
| ğŸ” ë¦¬ë‹¤ì´ë ‰íŠ¸ | Redis ì¡°íšŒ ê¸°ë°˜ ê³ ì† ì‘ë‹µ                 |
| ğŸ” ì¸ì¦/ì¸ê°€  | Spring Security + JWT                     |
| ğŸ“Š ë¡œê·¸ ìˆ˜ì§‘  | Kafka ê¸°ë°˜ ë¹„ë™ê¸° ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°           |
| ğŸ“¬ ì•Œë¦¼       | RabbitMQ ê¸°ë°˜ ì½˜ì†” ì•Œë¦¼ ì²˜ë¦¬              |
| ğŸ“ˆ ëª¨ë‹ˆí„°ë§   | Prometheus + Grafana ì‹¤ì‹œê°„ ìƒíƒœ ëª¨ë‹ˆí„°ë§ |
| âš™ï¸ ë°°í¬       | Docker                                    |

---

**âš™ï¸ ê¸°ìˆ  ìŠ¤íƒ**

| êµ¬ë¶„               | ê¸°ìˆ                                            |
| ------------------ | ---------------------------------------------- |
| **Backend**        | Java 17, Spring Boot 3.x, Spring Security, JPA |
| **Database**       | MariaDB, Redis                                 |
| **Message Queue**  | Kafka, RabbitMQ                                |
| **Infra & DevOps** | Docker                                         |
| **Monitoring**     | Prometheus, Grafana                            |
| **Docs**           | Swagger                                        |

---

**ğŸŒ± ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ**

_ğŸ”— URL ë‹¨ì¶• â€” Base62 ì¸ì½”ë”© ê¸°ë°˜ í‚¤ ìƒì„± ë° Redis ìºì‹±_

**ğŸ§© AS-IS**

ì´ˆê¸°ì—ëŠ” ë‹¨ì¶• URL ìš”ì²­ ì‹œë§ˆë‹¤ DBë¥¼ ì§ì ‘ ì¡°íšŒí–ˆê¸° ë•Œë¬¸ì—  
ìš”ì²­ì´ ëª°ë¦¬ë©´ **DB ë¶€í•˜ê°€ ê¸‰ê²©íˆ ì¦ê°€**í•˜ê³  ì‘ë‹µ ì†ë„ë„ ëŠë ¤ì¡ŒìŒ.

**ğŸ’¡ TO-BE**

- Redis ìºì‹±ì„ ì‚¬ìš©í•˜ì—¬ ìì£¼ ì¡°íšŒë˜ëŠ” ë‹¨ì¶• URLì€ ë©”ëª¨ë¦¬ì—ì„œ ë°”ë¡œ ë°˜í™˜. DB ë¶€ë‹´ ê°ì†Œ
- Base62 ì¸ì½”ë”©ìœ¼ë¡œ ì§§ê³  ê³ ìœ í•œ ë‹¨ì¶• í‚¤ ìƒì„±

**ğŸ§  êµ¬í˜„ ì½”ë“œ**

```java
//ì›ë³¸ urlë°›ì•„ ë‹¨ì¶• urlìƒì„±
    public Url createShortUrl(UrlRequest request){

        String key;
        int attemps = 0;

        do{ //ë¬´ì¡°ê±´ í•œ ë²ˆì€ ì‹¤í–‰
            if(attemps++ > 5) throw new RuntimeException("ì¤‘ë³µ ë°œìƒ");
            key = KeyGenerator.generateKey(8);

            //Redis setnx
            //ë§Œì•½ í‚¤ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´(Not Exists), ê°’ì„ ì„¤ì •
            Boolean success = valueOps.setIfAbsent("shortKeyLock:" + key, "lock", Duration.ofSeconds(5));
            if(Boolean.TRUE.equals(success)){
                break; //ë½ ì„±ê³µ, key ì‚¬ìš©ê°€ëŠ¥
            }
        }while(true); //ë£¨í”„ í†µê³¼


        Url url =  Url.builder()
                .originalUrl(request.getOriginalUrl())
                .shortKey(key)
                .createAt(LocalDateTime.now())
                .build();
        urlRepository.save(url);

        //ë½ í•´ì œ (5ì´ˆ í›„ ìë™ë§Œë£Œ, ëª…ì‹œì  ì‚­ì œ)
        redisTemplate.delete("shortKeyLock:" + key);

        return url;
    }

    //ë‹¨ì¶•í‚¤ ì›ë³¸ url ì°¾ê¸°
    public String getOriginalUrl(String key){
        Url url = urlRepository.findByShortKey(key)
                .orElseThrow(()-> new RuntimeException("Url not found"));
        return url.getOriginalUrl();
    }
```

---

_ğŸ” ë¦¬ë‹¤ì´ë ‰íŠ¸ â€” Redis ì¡°íšŒ ê¸°ë°˜ ê³ ì† ì‘ë‹µ_

**ğŸ§© AS-IS**

ëª¨ë“  ë¦¬ë‹¤ì´ë ‰íŠ¸ ìš”ì²­ì´ DBì— ì ‘ê·¼í•˜ë©´ì„œ I/O ë³‘ëª© ë°œìƒ.  
ê³ ë¹ˆë„ ìš”ì²­(ì˜ˆ: ë°”ì´ëŸ´ëœ ë‹¨ì¶• URL)ì¼ìˆ˜ë¡ ì„œë²„ ê³¼ë¶€í•˜.

**ğŸ’¡ TO-BE**

Redisì—ì„œ ë‹¨ì¶• URL ì¡°íšŒ â†’ DB ì ‘ê·¼ ìµœì†Œí™” â†’ ì‘ë‹µ ì†ë„ ê·¹ëŒ€í™”

**ğŸ§  êµ¬í˜„ ì½”ë“œ**

```java
 //ì¦‰ì‹œ kafkaë¡œê·¸ ë°œí–‰
    //dbëŠ” ë¹„ë™ê¸° ê¸°ë¡, ë¦¬ë‹¤ì´ë ‰íŠ¸ ì†ë„ ì•ˆì •í™”
    @GetMapping("/r/{key}")
    public ResponseEntity<Void> redirect(@PathVariable String key, HttpServletRequest request) {

        String originalUrl = urlService.getOriginalUrl(key);

        String clientIp = request.getRemoteAddr();

        //kafkaë¡œê·¸ì „ì†¡
        RedirectLog log = RedirectLog.builder()
                .shortKey(key)
                .timestamp(LocalDateTime.now())
                .clientIp(clientIp)
                .build();
        System.err.println(log);
        logProducer.send(log); //kafka
        notificationProducer.sendNotification(originalUrl); //rabbitmq



        return ResponseEntity.status(302) //Foundë¥¼ ì˜ë¯¸
                .location(URI.create(originalUrl))
                .build();
    }
```

---

_ğŸ” ì¸ì¦/ì¸ê°€ â€” Spring Security + JWT_

**ğŸ§© AS-IS**

ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ â†’ ì„œë²„ ì¬ì‹œì‘ ì‹œ ì„¸ì…˜ ì†Œë©¸, í™•ì¥ì„± ì œí•œ

**ğŸ’¡ TO-BE**

- **JWT ê¸°ë°˜ Stateless ì¸ì¦ êµ¬ì¡°**ë¡œ ì „í™˜.
- Refresh Tokenì€ Redisì— ì €ì¥í•´ ë§Œë£Œ ì œì–´ ê°€ëŠ¥í•˜ë„ë¡ êµ¬ì„±.

**ğŸ§  êµ¬í˜„ ì½”ë“œ**

```java
 //jwtìƒì„±
    public String createToken(String username){
        Date now = new Date();
        Date expiry = new Date(now.getTime() + validityInMs);;

        return Jwts.builder()
                .setSubject(username)
                .setIssuedAt(now)
                .setExpiration(expiry)
                .signWith(SignatureAlgorithm.HS256, secretKey)
                .compact();
    }

    //jwtì—ì„œ username ì¶”ì¶œ
    public String getUsername(String token){
        return Jwts.parser().setSigningKey(secretKey).parseClaimsJws(token).getBody().getSubject();
    }

    //jwt ìœ íš¨ì„±ì²´í¬
    public boolean validateToken(String token){
        try{
            Jwts.parser().setSigningKey(secretKey).parseClaimsJws(token);
            return true;
        }catch(JwtException | IllegalArgumentException e){
            return false;
        }
    }
```

---

_ğŸ“Š ë¡œê·¸ ìˆ˜ì§‘ â€” Kafka ê¸°ë°˜ ë¹„ë™ê¸° ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°_

**ğŸ§© AS-IS**

ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œ DBì— ì§ì ‘ ë¡œê·¸ ê¸°ë¡

**ğŸ’¡ TO-BE**

- Kafka Topicì— ë¡œê·¸ ì „ì†¡ â†’ DB ë¹„ë™ê¸° ê¸°ë¡
- ë³„ë„ì˜ Consumerê°€ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë¡œê·¸ë¥¼ ìˆ˜ì§‘ í›„ DB ì €ì¥.

**ğŸ§  êµ¬í˜„ ì½”ë“œ**

```java
public void send(RedirectLog log) {
        System.err.println("(kafka ë³´ëƒ„) producer: "+log);
        kafkaTemplate.send(TOPIC, log.getShortKey(), log);
    }
```

---

_ğŸ“¬ ì•Œë¦¼ â€” RabbitMQ ê¸°ë°˜ ì´ë©”ì¼/ì½˜ì†” ì•Œë¦¼ ì²˜ë¦¬_

**ğŸ§© AS-IS**

ì—ëŸ¬ ì•Œë¦¼

**ğŸ’¡ TO-BE**

- RabbitMQ íì— ë©”ì‹œì§€ ì „ì†¡ â†’ ë¹„ë™ê¸° ì²˜ë¦¬

**ğŸ§  êµ¬í˜„ ì½”ë“œ**

```java
public void sendNotification(String message) {
        rabbitTemplate.convertAndSend(NOTIFICATION_QUEUE, message);
        System.err.println("(RABBITMQ) ë©”ì„¸ì§€ ë³´ëƒ„ : " + message);
    }
```

---

_âš™ï¸ ë°°í¬ â€” Docker ê¸°ë°˜ êµ¬ì„±_

**ğŸ§© AS-IS**

ë¡œì»¬ í™˜ê²½ì—ì„œ ìˆ˜ë™ ë¹Œë“œ

**ğŸ’¡ TO-BE**

- Dockerë¡œ ì»¨í…Œì´ë„ˆí™”

**ğŸ§  êµ¬í˜„ ì½”ë“œ**

```yaml
name: Deploy Shortifyversion: '3.8'
services:
  mariadb:
    image: mariadb:11
    container_name: shortify-mariadb
    restart: always
    environment:
      MARIADB_ROOT_PASSWORD:
      MARIADB_DATABASE: shortify
      MARIADB_USER: shortify_user
      MARIADB_PASSWORD: shortify_pass
    ports:
      - "3307:3306"
    volumes:
      - ./db_data:/var/lib/mysql

  redis:
    image: redis:7
    container_name: shortify-redis
    restart: always
    ports:
      - "6379:6379"

  zookeeper:
    image: wurstmeister/zookeeper
    container_name: zookeeper
    ports:
      - "2181:2181"

  kafka:
    image: wurstmeister/kafka
    container_name: shortify-kafka
    ports:
      - "9092:9092"
    environment:
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://localhost:9092
      KAFKA_LISTENERS: PLAINTEXT://0.0.0.0:9092
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
    depends_on: # Zookeeperê°€ ë¨¼ì € ì‹¤í–‰ë˜ë„ë¡ ëª…ì‹œ
      - zookeeper

  kafka-ui:
    image: provectuslabs/kafka-ui:latest
    container_name: shortify-kafka-ui
    ports:
      - "9090:8080"  # ğŸ‘ˆ ì ‘ì† í¬íŠ¸ ì„¤ì • (9090ë²ˆìœ¼ë¡œ ì ‘ì†)
    environment:
      # í´ëŸ¬ìŠ¤í„° ì´ë¦„ ì„¤ì •
      KAFKA_CLUSTERS_0_NAME: Shortify-Cluster
      # ğŸš¨ğŸš¨ ê°€ì¥ ì¤‘ìš”! ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì´ë¦„ìœ¼ë¡œ Kafkaì— ì ‘ì†í•©ë‹ˆë‹¤. ğŸš¨ğŸš¨
      KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS: shortify-kafka:9092
    depends_on:
      - kafka

  rabbitmq:
    image: rabbitmq:3-management
    container_name: shortify-rabbitmq
    ports:
      - "5672:5672" # ë©”ì‹œì§€ ë¸Œë¡œì»¤ í¬íŠ¸
      - "15672:15672" # ê´€ë¦¬ ì½˜ì†”
    environment:
      RABBITMQ_DEFAULT_USER: guest
      RABBITMQ_DEFAULT_PASS: guest

```

---

# âœ… ì „ì²´ ìš”ì•½

| ê¸°ëŠ¥           | ì„±ëŠ¥ í–¥ìƒ                                                                                                      |
| -------------- | -------------------------------------------------------------------------------------------------------------- |
| URL ë‹¨ì¶•       | <img src="/img/url.png" alt="" width="500" />                                                                  |
| ë¦¬ë‹¤ì´ë ‰íŠ¸     | <img src="/img/shortify.png" alt="" width="500" />                                                             |
| kafka          | <img src="/img/kafka_send.png" alt="" width="500" /> <img src="/img/kafka_receive.png" alt="" width="500" />   |
| rabbitMQ       | <img src="/img/rabbit_send.png" alt="" width="500" /> <img src="/img/rabbit_receive.png" alt="" width="500" /> |
| ì•Œë¦¼           | <img src="/img/íŠ¸ë˜í”½.png" alt="" width="200" />                                                               |
| Container êµ¬ì„± | <img src="/img/docker_desktop.png" alt="" width="500" />                                                       |

---

## ğŸ“˜ í† ì´ í”„ë¡œì íŠ¸ 2: mini game â€” Next.js ê¸°ë°˜ ê²Œì„ í—ˆë¸Œ

- **_[GitHub ë³´ê¸°ëŸ¬ê°€ê¸°](https://github.com/TheSungwon/nextjs_mini_game) ğŸ”—_**
- **_[ì‚¬ì´íŠ¸ë³´ëŸ¬ê°€ê¸°](https://nextjs-mini-game.vercel.app/) âš½_**

**ğŸ§© í”„ë¡œì íŠ¸ ê°œìš”**

**í”„ë¡œì íŠ¸ëª…:** nextjs-mini-game

**âœ¨ ì£¼ìš” ê¸°ëŠ¥**

**_1. ğŸ¯ ì •êµí•œ 2D ë¬¼ë¦¬ ì—”ì§„ êµ¬í˜„_**

- **ì¤‘ë ¥ ë° ë§ˆì°°**: ëª¨ë“  ê³µì— ì¼ê´€ëœ ì¤‘ë ¥ê³¼ ë§ˆì°°ì„ ì ìš©í•˜ì—¬ ì‹¤ì œì™€ ê°™ì€ ì›€ì§ì„ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- **ê³µ-ê³µ ì¶©ëŒ**: ê³µë“¤ ê°„ì˜ ì¶©ëŒ ì‹œ, ì™„ì „ íƒ„ì„± ì¶©ëŒ ë¡œì§ì„ ì ìš©í•˜ì—¬ ìš´ë™ëŸ‰ê³¼ ì—ë„ˆì§€ê°€ ë³´ì¡´ë˜ë„ë¡ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.
- **ê³µ-ì¥ì• ë¬¼ ì¶©ëŒ**: ê¸°ìš¸ì–´ì§„ ë§‰ëŒ€, íšŒì „í•˜ëŠ” ë§‰ëŒ€, íƒ„ì„± ìˆëŠ” ë§‰ëŒ€ ë“± ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ì¥ì• ë¬¼ê³¼ì˜ ì¶©ëŒì„ ì •êµí•˜ê²Œ ì²˜ë¦¬í•©ë‹ˆë‹¤. íŠ¹íˆ íšŒì „í•˜ëŠ” ì¥ì• ë¬¼ì€ ì¶©ëŒ ì‹œ ê³µì— íšŒì „ ìš´ë™ëŸ‰ì„ ì „ë‹¬í•˜ì—¬ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•˜ê³  ì—­ë™ì ì¸ í”Œë ˆì´ë¥¼ ìœ ë„í•©ë‹ˆë‹¤.

**_2. ğŸ² ë™ì ì¸ ê²Œì„ í™˜ê²½_**

- **ëœë¤ ì¥ì• ë¬¼ ìƒì„±**: ë§¤ ê²Œì„ ì‹œì‘ ì‹œ, ê¸°ìš¸ê¸°, íšŒì „ ì†ë„, íƒ„ì„± ê³„ìˆ˜ê°€ ë¬´ì‘ìœ„ë¡œ ì„¤ì •ëœ ë‹¤ì–‘í•œ í˜•íƒœì˜ ì¥ì• ë¬¼ì´ ìë™ìœ¼ë¡œ ë°°ì¹˜ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë§¤ë²ˆ ìƒˆë¡œìš´ í”Œë ˆì´ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.
- **ë©€í‹° í”Œë ˆì´ì–´ ì§€ì›**: ì—¬ëŸ¬ ëª…ì˜ í”Œë ˆì´ì–´ê°€ ë™ì‹œì— ì°¸ì—¬í•˜ì—¬ ê²½ìŸí•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. (í˜„ì¬ëŠ” ì´ë¦„ ê¸°ë°˜ì˜ ì‹œë®¬ë ˆì´ì…˜)
- **ì‹¤ì‹œê°„ ìˆœìœ„ ì‹œìŠ¤í…œ**: ê²Œì„ì´ ì¢…ë£Œë˜ë©´ ê° í”Œë ˆì´ì–´ì˜ ë„ì°© ìˆœì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹¤ì‹œê°„ ìˆœìœ„ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

**ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ**

- **í”„ë¡ íŠ¸ì—”ë“œ**: `Next.js 15 (App Router)`, `React 19`, `TypeScript`
- **ìƒíƒœ ê´€ë¦¬**: `React Hooks (useState, useEffect, useRef)`
- **ìŠ¤íƒ€ì¼ë§**: `Tailwind CSS`
- **UI ì»´í¬ë„ŒíŠ¸**: `Radix UI (@radix-ui/react-progress, @radix-ui/react-slot)`
- **ê·¸ë˜í”½**: `HTML5 Canvas API`
- **ìœ í‹¸ë¦¬í‹°**: `clsx`, `tailwind-merge`, `lucide-react`

---

---

## ğŸ“˜ í† ì´ í”„ë¡œì íŠ¸ 3: markdown ë¸”ë¡œê·¸ â€” Next.js ê¸°ë°˜ markdown ë¸”ë¡œê·¸

- **_[GitHub ë³´ê¸°ëŸ¬ê°€ê¸°](https://github.com/TheSungwon/my_blog) ğŸ”—_**
- **_[ì‚¬ì´íŠ¸ë³´ëŸ¬ê°€ê¸°](https://sungwon-blog.vercel.app/) ğŸ“œ_**

**ğŸ§© í”„ë¡œì íŠ¸ ê°œìš”**

**í”„ë¡œì íŠ¸ëª…:** my_blog

**âœ¨ ì£¼ìš” ê¸°ëŠ¥**

ê°œë°œ ê¸°ë¡ì„ ë‹´ëŠ” ê°œì¸ ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. Markdown ê¸°ë°˜ í¬ìŠ¤íŠ¸ë¥¼ ì •ì  ìƒì„±(SSG)í•˜ì—¬ ë¹ ë¥´ê³  ì•ˆì •ì ì¸ ì½ê¸° ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¤í¬ ëª¨ë“œ, ëª©ì°¨(TOC), ì½”ë“œ í•˜ì´ë¼ì´íŠ¸ ë“± ê¸€ ì½ê¸°ì— ìµœì í™”ëœ UI/UXë¥¼ ì œê³µí•©ë‹ˆë‹¤.

- **Markdown í¬ìŠ¤íŠ¸**
- **ëª©ì°¨ ìë™ ìƒì„±**
- **ì½”ë“œ í•˜ì´ë¼ì´íŠ¸**
- **ë‹¤í¬ ëª¨ë“œ í† ê¸€**
- **ì •ì  ìƒì„±(SSG)**
- **íƒ€ì´í¬ê·¸ë˜í”¼ ìµœì í™”**

**ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ**

- **í”„ë¡ íŠ¸ì—”ë“œ**: `Next.js 15 (App Router)`, `React 19`, `TypeScript`
- **ìŠ¤íƒ€ì¼ë§**: `Tailwind CSS 4`, `PostCSS`
- **Markdown íŒŒì´í”„ë¼ì¸**: `unified`, `remark(remark-parse, remark-gfm, remark-rehype)`, `rehype(rehype-slug, rehype-autolink-headings, rehype-toc, rehype-highlight, rehype-stringify)`, `gray-matter`
- **í…Œë§ˆ**: `next-themes`

**ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°**

```

â”œâ”€ posts/                # ë¸”ë¡œê·¸ ê¸€(Markdown)
â”œâ”€ public/               # ì •ì  ìì‚°(ì•„ì´ì½˜/ì´ë¯¸ì§€)
â”œâ”€ src/
â”‚  â”œâ”€ app/
â”‚  â”‚  â”œâ”€ components/    # ë ˆì´ì•„ì›ƒ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸(Header, Providers)
â”‚  â”‚  â”œâ”€ posts/
â”‚  â”‚  â”‚  â”œâ”€ page.tsx    # /posts ëª©ë¡ í˜ì´ì§€
â”‚  â”‚  â”‚  â””â”€ [slug]/
â”‚  â”‚  â”‚     â””â”€ page.tsx # /posts/[slug] ìƒì„¸ í˜ì´ì§€
â”‚  â”‚  â”œâ”€ layout.tsx     # ì „ì—­ ë ˆì´ì•„ì›ƒ(ë©”íƒ€/í—¤ë”/Providers)
â”‚  â”‚  â”œâ”€ page.tsx       # ë£¨íŠ¸ ì¸ë±ìŠ¤(í¬ìŠ¤íŠ¸ ì¹´ë“œ ê·¸ë¦¬ë“œ)
â”‚  â”‚  â””â”€ globals.css    # ì „ì—­ ìŠ¤íƒ€ì¼(íƒ€ì´í¬ê·¸ë˜í”¼/TOC/ë‹¤í¬)
â”‚  â”œâ”€ components/
â”‚  â”‚  â””â”€ ThemeToggle.tsx
â”‚  â””â”€ lib/
â”‚     â”œâ”€ markdown.ts    # Markdown â†’ HTML ë³€í™˜ + TOC ìƒì„±
â”‚     â””â”€ posts.ts       # í¬ìŠ¤íŠ¸ ì½ê¸°/ë©”íƒ€/ì •ì  íŒŒë¼ë¯¸í„°
â”œâ”€ package.json
â”œâ”€ next.config.ts
â”œâ”€ tailwind.config.ts
â”œâ”€ postcss.config.mjs
â”œâ”€ tsconfig.json
â””â”€ eslint.config.mjs
```

## ğŸ“˜ í† ì´ í”„ë¡œì íŠ¸ 4: next_ocr â€” Next.js ê¸°ë°˜ ë¬¸ì„œ ocr

- **_[GitHub ë³´ê¸°ëŸ¬ê°€ê¸°](https://github.com/TheSungwon/next_ocr) ğŸ”—_**
- **_[ì‚¬ì´íŠ¸ë³´ëŸ¬ê°€ê¸°](https://next-ocr-six.vercel.app/) ğŸ“‘_**

**ğŸ§© í”„ë¡œì íŠ¸ ê°œìš”**

**í”„ë¡œì íŠ¸ëª…:** next_ocr

**âœ¨ ì£¼ìš” ê¸°ëŠ¥**

- **OCR ì—…ë¡œë“œ/ë¶™ì—¬ë„£ê¸°**
  - íŒŒì¼ ì—…ë¡œë“œ ë˜ëŠ” ì˜ì—­ì— Ctrl+Vë¡œ ì´ë¯¸ì§€ ë¶™ì—¬ë„£ê¸°
  - OpenRouter Vision ëª¨ë¸ë¡œ í…ìŠ¤íŠ¸ ì¶”ì¶œ
- **ê²°ê³¼ ì €ì¥/ê´€ë¦¬**
  - Neon PostgreSQLì— ì´ë¯¸ì§€(Base64 URL)ì™€ ê²°ê³¼ í…ìŠ¤íŠ¸, ìƒì„±ì‹œê°„ ì €ì¥
  - íˆìŠ¤í† ë¦¬ì—ì„œ ë¯¸ë¦¬ë³´ê¸°/ì‚­ì œ(ì†Œí”„íŠ¸ ì‚­ì œ)
- **ëŒ€ì‹œë³´ë“œ**
  - ì´ ê±´ìˆ˜, ì˜¤ëŠ˜, 7ì¼ í•©ê³„, í‰ê·  í…ìŠ¤íŠ¸ ê¸¸ì´
  - ìµœê·¼ 14ì¼ ì¶”ì´(ë¯¸ë‹ˆ ì°¨íŠ¸), ìµœê·¼ 10ê±´ í”„ë¦¬ë·°
- **ë ˆì´ì•„ì›ƒ/í…Œë§ˆ**
  - ë°˜ì‘í˜• ì‚¬ì´ë“œë°”/í—¤ë”
  - next-themes + CSS ë³€ìˆ˜ í† í°ìœ¼ë¡œ ë‹¤í¬/ë¼ì´íŠ¸ ìë™ ëŒ€ì‘

**_2. ğŸ² API ì—”ë“œí¬ì¸íŠ¸_**

- **POST `/api/ocr`**
  - Body: `{ imageBase64: string, mimeType: string }`
  - ë™ì‘: OpenRouterì— OCR ìš”ì²­ â†’ DB ì €ì¥ â†’ `{ id, extractedText, createdAt }`
- **GET `/api/ocr`**
  - Query: `?limit=20&cursor=ISO_DATE` (created_at ì»¤ì„œ ê¸°ì¤€)
  - ì‘ë‹µ: `{ items, nextCursor }`
- **DELETE `/api/ocr/[id]`**
  - ë™ì‘: ì†Œí”„íŠ¸ ì‚­ì œ(`deleted_at = now()`)
- **GET `/api/ocr/stats`**
  - ì‘ë‹µ: `{ summary, series, recent }`
  - summary: ì´ ê±´ìˆ˜/ì˜¤ëŠ˜/7ì¼/í‰ê·  í…ìŠ¤íŠ¸ ê¸¸ì´
  - series: ìµœê·¼ 14ì¼ ì¼ë³„ ì§‘ê³„
  - recent: ìµœê·¼ 10ê±´
- **GET `/api/health`**
  - DB ì—°ê²° ìƒíƒœ í™•ì¸ `{ health: "ok", now }`

**ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ**

- **Framework**: Next.js 16 (App Router, Turbopack)
- **UI/Styling**:
  - Tailwind CSS v4
  - next-themes (ë‹¤í¬ëª¨ë“œ)
  - Radix UI ê¸°ë°˜ ì»´í¬ë„ŒíŠ¸
  - lucide-react ì•„ì´ì½˜
- **State**: React 19, Zustand(ì„ íƒì )
- **OCR API**: OpenRouter (ì˜ˆì‹œ ëª¨ë¸: `google/gemma-3-27b-it:free` ë“±)
- **DB**: Neon PostgreSQL (@neondatabase/serverless)
- **ìœ í‹¸**: clsx, tailwind-merge, uuid

---

---

## ğŸ—ï¸ í† ì´ í”„ë¡œì íŠ¸ 5:Real CMP K8s Connector: K8s API ì—°ë™ ëª¨ë“ˆ

**1\. í”„ë¡œì íŠ¸ ê°œìš” ë° ëª©í‘œ**

ì´ í”„ë¡œì íŠ¸ëŠ” í´ë¼ìš°ë“œ ê´€ë¦¬ í”Œë«í¼(CMP) ë°±ì—”ë“œì˜ í•µì‹¬ ê¸°ëŠ¥ì¸ **ì´ê¸°ì¢… IaaS í”Œë«í¼(Kubernetes) ìì› í†µí•© ì¡°íšŒ ëª¨ë“ˆ**ì„ êµ¬í˜„í•˜ê³ , **ì‹¤ì œ í™˜ê²½ì—ì„œì˜ ì¸ì¦/ì¸ê°€ ë¬¸ì œë¥¼ í•´ê²°**í•˜ì—¬ ì‹¤ë¬´ ì—­ëŸ‰ì„ ì¦ëª…í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

- **í”„ë¡œì íŠ¸ëª…:** **Real CMP K8s Connector**
- **í•µì‹¬ ëª©í‘œ:** Kubernetes API ì—°ë™, ë…¼ë¸”ë¡œí‚¹ í†µì‹  êµ¬í˜„, K8s ë³´ì•ˆ(ì¸ì¦/ì¸ê°€) ì²˜ë¦¬
- **ì£¼ìš” ê¸°ëŠ¥:** K8s Pod ëª©ë¡ ì¡°íšŒ, ë°ì´í„° ê°€ê³µ ë° CMP í¬í„¸ìš© REST API ì œê³µ

---

**2\. ì‚¬ìš© ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)**

| ì¹´í…Œê³ ë¦¬      | ìƒì„¸ ìŠ¤íƒ                                              | í•µì‹¬ ì—­í•  ë° ì„ ì • ì´ìœ                                                                 |
| :------------ | :----------------------------------------------------- | :------------------------------------------------------------------------------------ |
| **ë°±ì—”ë“œ**    | **Java 17+**, **Spring Boot**                          | REST API ë°±ì—”ë“œ êµ¬ì¶• ë° DI (Dependency Injection) ê´€ë¦¬                                |
| **API í†µì‹ **  | **Spring WebFlux (WebClient)**                         | Multi API í˜¸ì¶œì´ ì¦ì€ CMP í™˜ê²½ì˜ **ë…¼ë¸”ë¡œí‚¹(Non-blocking) í†µì‹ ** ë° **ë™ì‹œì„± ìµœì í™”** |
| **ê°œë°œ í™˜ê²½** | **Kubernetes (MiniKube)**, **kubectl**, **PowerShell** | ì‹¤ì œ K8s í™˜ê²½ì—ì„œ API ì—°ë™ ë° ìì› ê´€ë¦¬ ê²½í—˜ í™•ë³´                                     |

---

**3\. í•µì‹¬ êµ¬í˜„ ë‚´ìš© ë° ì½”ë“œ ìƒì„¸**

#### 3.1. K8s ë…¼ë¸”ë¡œí‚¹ API ì—°ë™ ë° ë°ì´í„° ê°€ê³µ

**[ì½”ë“œ ì²¨ë¶€]** `K8sApiService.java`ì˜ í•µì‹¬ ì—°ë™ ë° ë°ì´í„° ê°€ê³µ ë¡œì§ì…ë‹ˆë‹¤. **WebFluxì˜ `Mono`ì™€ `map` ì—°ì‚°**ì„ ì‚¬ìš©í•˜ì—¬ ë…¼ë¸”ë¡œí‚¹ ë°©ì‹ìœ¼ë¡œ K8s API ì‘ë‹µì„ ë°›ì•„ CMPìš© DTOë¡œ ì •ì œí•©ë‹ˆë‹¤.

```java
// K8sApiService.java (í•µì‹¬ ë¡œì§)
@Service
public class K8sApiService {

    //kubectl cluster-infoë¡œ í™•ì¸í•œ ì£¼ì†Œ
    private static final String K8S_API_BASE_URL = "https://127.0.0.1:????" //kubectl cluster-info ;

    private static final String K8S_AUTH_TOKEN = "tokenë°œê¸‰ ê°’ ì…ë ¥";

    private final WebClient webClient;

    public K8sApiService() throws Exception{
        // 1. SSL ì¸ì¦ì„œ ê²€ì¦ì„ ë¬´ì‹œí•˜ëŠ” SSL Context ìƒì„±
        SslContext sslContext = SslContextBuilder.forClient()
                .trustManager(InsecureTrustManagerFactory.INSTANCE) // ë³´ì•ˆ ìœ„í—˜! ê°œë°œ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©
                .build();

        // 2. ì´ Contextë¥¼ Netty ê¸°ë°˜ì˜ HttpClientì— ì ìš©
        HttpClient httpClient = HttpClient.create()
                .secure(sslContextSpec -> sslContextSpec.sslContext(sslContext));

        // 3. WebClientì— ë¹„ë³´ì•ˆ HTTP ì»¤ë„¥í„° ì ìš©
        this.webClient = WebClient.builder()
                .baseUrl(K8S_API_BASE_URL)
                .clientConnector(new ReactorClientHttpConnector(httpClient))
                .build();
    }

    public Mono<K8sPodList> getPodList() {
        return webClient.get()
                .uri("/api/v1/pods")
                .header("Authorization", "Bearer " + K8S_AUTH_TOKEN)
                .retrieve()
                .bodyToMono(K8sPodList.class);
    }
}

```

**[ì½”ë“œ ì²¨ë¶€]** ìµœì¢… CMP í¬í„¸ì—ì„œ ì‚¬ìš©í•  **`K8sPodList.java`** DTO ì½”ë“œ.

```java
//ì¤‘ì²©í´ë˜ìŠ¤ ê³„ì¸µì DTO jsonêµ¬ì¡°ë¥¼ ì •í™•í•˜ê²Œ ë§¤í•‘
@Data
public class K8sPodList {
    private List<PodItem> items; //k8s apiì‘ë‹µ ëª©ë¡

    @Data
    public static class PodItem{
        private Metadata metadata;
        private PodStatus status;

        @Data
        public static class Metadata{
            private String name;
        }

        @Data
        public static class PodStatus{
            private String phase;
        }
    }
}
```

**[ì½”ë“œ ì²¨ë¶€]** K8s í´ëŸ¬ìŠ¤í„°ì— í˜„ì¬ ë–  ìˆëŠ” ì‹¤ì œ Podëª©ë¡ í™•ì¸ **`K8sResourceController.java`** Controller ì½”ë“œ.

```java
//http://localhost:8080/api/v1/k8s/pods í˜¸ì¶œ
@RestController
@RequestMapping("/api/v1/k8s")
@RequiredArgsConstructor
public class K8sResourceController {

    private final K8sApiService k8sApiService;

    @GetMapping("/pods")
    public Mono<K8sPodList> getK8sPods() {

        return k8sApiService.getPodList();
    }

}
```

---

**4\. ê¸°ìˆ ì  í•´ê²° ê³¼ì •**

#### 4.1. K8s API ì¸ê°€(Authorization) ë° ì¸ì¦ ë¬¸ì œ í•´ê²°

| ë¬¸ì œ              | ìƒì„¸ ë‚´ìš©                                                           | í•´ê²° ë°©ë²•                                                                                                                                        | ì–´í•„ í¬ì¸íŠ¸                                                                                  |
| :---------------- | :------------------------------------------------------------------ | :----------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------- |
| **403 Forbidden** | í† í° ì—†ì´ ì ‘ì† ì‹œ `system:anonymous`ë¡œ ì²˜ë¦¬ë˜ì–´ ìì› ì¡°íšŒ ê¶Œí•œ ê±°ë¶€ | 1. **`cmp-api-user` Service Account** ë° **ClusterRoleBinding** (`view` ê¶Œí•œ) ì ìš©. 2. **YAML íŒŒì¼**ì„ ì´ìš©í•œ **í† í° Secret ìˆ˜ë™ ìƒì„±** ë° ì¶”ì¶œ. | \*\*ìµœì‹  K8s ë²„ì „(1.24+)\*\*ì˜ ë³´ì•ˆ ì •ì±… ë° **ì‹œìŠ¤í…œ ê°„ ì¸ê°€(Authorization)** ì²˜ë¦¬ ëŠ¥ë ¥ ì…ì¦ |
| **SSL ì¸ì¦ì„œ**    | MiniKube ìì²´ ì„œëª… ì¸ì¦ì„œë¡œ ì¸í•œ `SSLHandshakeException` ë°œìƒ       | ê°œë°œ í™˜ê²½ì„ ìœ„í•´ **WebClientì— ë¹„ë³´ì•ˆ ì»¤ë„¥í„°**ë¥¼ ì„ì‹œ ì ìš©í•˜ì—¬ ê°œë°œ ì§„í–‰ (ìš´ì˜ í™˜ê²½ ì‹œ TrustStore ë“±ë¡ í•„ìš”ì„± ì¸ì§€)                              | **í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œì˜ ë³´ì•ˆ í†µì‹  ë° ì¸ì¦ì„œ** ë¬¸ì œ í•´ê²° ê²½í—˜                                   |

```yml
# sa-token-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: cmp-api-user-token # Secret ì´ë¦„
  namespace: default
  annotations:
    # ğŸŒŸ ì´ Secretì´ cmp-api-user ê³„ì •ì˜ í† í°ì„ì„ ëª…ì‹œí•©ë‹ˆë‹¤. ğŸŒŸ
    kubernetes.io/service-account.name: cmp-api-user
type: kubernetes.io/service-account-token
#
#
#
#

#1. ì„œë¹„ìŠ¤ ê³„ì • ìƒì„±
#kubectl create serviceaccount cmp-api-user -n default
#default ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— cmp-api-userë¼ëŠ” ê³„ì •ì„ ë§Œë“­ë‹ˆë‹¤.

#2. ì½ê¸° ê¶Œí•œ ë¶€ì—¬
#kubectl create clusterrolebinding cmp-read-pods-binding --clusterrole=view --serviceaccount=default:cmp-api-user
#ì´ ê³„ì •ì—ê²Œ í´ëŸ¬ìŠ¤í„° ì „ì²´ ìì›ì„ **'ì¡°íšŒ(view)'**í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤.
#
#
#-------sa-token-secret.yaml ì‹¤í–‰
# kubectl apply -f sa-token-secret.yaml
#
# 1. ì¸ì½”ë”©ëœ í† í° ë¬¸ìì—´ì„ ë³€ìˆ˜ì— ë‹´ìŠµë‹ˆë‹¤.
#$TOKEN_ENCODED = kubectl get secret cmp-api-user-token -o jsonpath='{.data.token}' -n default

# 2. PowerShell ë‚´ì¥ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ Base64 ë””ì½”ë”©í•©ë‹ˆë‹¤.
#$FINAL_K8S_TOKEN = [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String($TOKEN_ENCODED))

# 3. ìµœì¢… í† í°ì„ ì¶œë ¥í•©ë‹ˆë‹¤.
#Write-Host "ğŸŒŸ ìµœì¢… íšë“ëœ K8s í† í°: $FINAL_K8S_TOKEN"
```

**5\. minikube ì‹¤í–‰ ë° API í˜¸ì¶œ ê²°ê³¼**

## <img src="/img/minikube_cli.jpg" alt=""  />

- minikube start k8s í´ëŸ¬ìŠ¤í„° ì‹¤í–‰
- kubectl cluster-info k8s í´ëŸ¬ìŠ¤í„° ì •ë³´ í™•ì¸

## <img src="/img/k8s_pods.jpg" alt="" />

- kubectl get pods k8s pod ëª©ë¡ í™•ì¸

#

---

---

# ê°ì‚¬í•©ë‹ˆë‹¤ ! ğŸ˜„
